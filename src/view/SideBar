#include "imgui.h"

class Sidebar {
  public:
    enum Section {
        CURRENT_SIMULATIONS,
        ADD_SIMULATION,
        SIMULATION_MANAGER,
        SETTINGS,
        NONE
    };

  private:
    bool isCollapsed = false;
    Section activeSection = CURRENT_SIMULATIONS;

  public:
    void render() {
        ImGui::Begin("Sidebar", nullptr,
                     ImGuiWindowFlags_NoTitleBar | ImGuiWindowFlags_NoResize);

        if (ImGui::Button(isCollapsed ? ">" : "<")) {
            isCollapsed = !isCollapsed;
        }

        if (isCollapsed) {
            renderCollapsedView();
        } else {
            renderExpandedView();
        }

        ImGui::End();
    }

    Section getActiveSection() { return activeSection; }

  private:
    void renderCollapsedView() {
        if (ImGui::Button("ðŸ”„"))
            activeSection = CURRENT_SIMULATIONS;
        if (ImGui::Button("âž•"))
            activeSection = ADD_SIMULATION;
        if (ImGui::Button("ðŸ“‚"))
            activeSection = SIMULATION_MANAGER;
        if (ImGui::Button("âš™"))
            activeSection = SETTINGS;
    }

    void renderExpandedView() {
        if (ImGui::Button("ðŸ”„ Current Simulations"))
            activeSection = CURRENT_SIMULATIONS;
        if (ImGui::Button("âž• Add Simulation"))
            activeSection = ADD_SIMULATION;
        if (ImGui::Button("ðŸ“‚ Simulation Manager"))
            activeSection = SIMULATION_MANAGER;
        if (ImGui::Button("âš™ Settings"))
            activeSection = SETTINGS;
    }
};
